import ReviewsAboutUsClient from "./ReviewsAboutUsClient";

type ReviewData = {
  username: string;
  rate: 5 | 4 | 3 | 2 | 1;
  reviewText: string;
};

async function getReviews(): Promise<ReviewData[]> {
  const res = await fetch("http://45.13.236.245:25591/api/reviews/random", {
    next: {
      revalidate: 30,
    },
  });

  if (!res.ok) {
    throw new Error("Failed to fetch reviews");
  }

  return res.json();
}

export default async function ReviewsAboutUs() {
  const reviewsData = await getReviews();
  const fallbackReviews: ReviewData[] = [
    {
      username: "–ê–Ω–¥—Ä–µ–≥—Ä–∞—É–Ω–¥",
      rate: 4,
      reviewText:
        "–Ø–∫—â–æ —É –∫—ñ–ª—å–∫–æ—Ö —Å–ª–æ–≤–∞—Ö... —Ç—É—Ä–±–æ—Ç–ª–∏–≤–æ, —à–≤–∏–¥–∫–æ, –∑ –≤–µ–ª–∏–∫–æ—é –≤—ñ–¥–¥–∞—á–µ—é (–∑–∞–º–æ–≤–ª—è–≤ –ø–ª–∞–≥—ñ–Ω)",
    },
    {
      username: "Papirus",
      rate: 5,
      reviewText:
        "–Ø –Ω–µ –¥—É–∂–µ –≥–∞—Ä–Ω–∏–π —É –ø—ñ–¥–±–æ—Ä—ñ —Å–ª—ñ–≤, —Ç–æ–º—É –Ω–µ –∑–Ω–∞—é, —è–∫–∏–π —Å–∞–º–µ –≤—ñ–¥–≥—É–∫ –ø–∏—Å–∞—Ç–∏, –∞–ª–µ: –ú–µ–Ω—ñ –±—É–ª–æ –¥—É–∂–µ –ø—Ä–∏—î–º–Ω–æ –∑ –≤–∞–º–∏ –ø—Ä–∞—Ü—é–≤–∞—Ç–∏. –©–∏—Ä–æ –≤–¥—è—á–Ω–∏–π, —â–æ –≤–∏ –ø—ñ—à–ª–∏ –Ω–∞–∑—É—Å—Ç—Ä—ñ—á –º–æ—ó–π —Ç–µ—Ä–º—ñ–Ω–æ–≤–æ—Å—Ç—ñ —Ç–∞ –æ–ø–µ—Ä–∞—Ç–∏–≤–Ω–æ –¥–æ–ø–æ–º–∞–≥–∞–ª–∏ –∑ –±–∞–≥–∞–º–∏, —è–∫—ñ –≤–∏–Ω–∏–∫–∞–ª–∏ –≤ –ø—Ä–æ—Ü–µ—Å—ñ. –ù–∞—Ä–∞–∑—ñ –ø–ª–∞–≥—ñ–Ω —Å—Ç–∞–±—ñ–ª—å–Ω–æ –ø—Ä–∞—Ü—é—î, —ñ –º–∏ —ñ –≥—Ä–∞–≤—Ü—ñ –∑–∞–¥–æ–≤–æ–ª–µ–Ω—ñ - –∑–∞—Ä–∞–∑ —Ü–µ –æ–¥–∏–Ω —ñ–∑ –Ω–∞–π–ø–æ–ø—É–ª—è—Ä–Ω—ñ—à–∏—Ö —ñ–≤–µ–Ω—Ç—ñ–≤ –Ω–∞ —Å–µ—Ä–≤–µ—Ä—ñ üíõ",
    },
    {
      username: "Blaze",
      rate: 5,
      reviewText:
        "–Ø –∑–∞–º–æ–≤–ª—è–≤ –∫–∞—Ä—Ç—É –¥–ª—è –≤—ñ–¥–µ–æ –Ω–∞ —é—Ç—É–±. –í–∏ –ø–æ–±—É–¥—É–≤–∞–ª–∏ —ó—ó —à–≤–∏–¥–∫–æ —Ç–∞ —à–∏–∫–∞—Ä–Ω–æ, –±—É–∫–≤–∞–ª—å–Ω–æ —Ç–∞–∫, —è–∫ –º–∏ —Å–æ–±—ñ —É—è–≤–ª—è–ª–∏. –£—Å—ñ –ø—Ä–∞–≤–∫–∏ –±—É–ª–∏ –≤–∏–∫–æ–Ω–∞–Ω—ã –¥—É–∂–µ —à–≤–∏–¥–∫–æ, –∞ —Ç–∞–∫–æ–∂ –≤–µ–ª–∏–∫–µ —Å–ø–∞—Å–∏–±—ñ –∑–∞ —Ç–µ, —â–æ –≤–∏ —â–æ–¥–Ω—è –∞–ø–¥–µ–π—Ç–∏–ª–∏ –ø—Ä–æ–≥—Ä–µ—Å - —Ü–µ –º–µ–Ω–µ –¥—É–∂–µ –∑–∞—Å–ø–æ–∫–æ—é–≤–∞–ª–æ. –±—ñ–ª–¥–µ—Ä–∏ —á–∞–¥–∏! üßè",
    },
  ];
  const reviews = reviewsData.length !== 3 ? fallbackReviews : reviewsData;

  return <ReviewsAboutUsClient reviews={reviews} />;
}
